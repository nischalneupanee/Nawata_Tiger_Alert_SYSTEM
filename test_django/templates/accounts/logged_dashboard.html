{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- leaflet js  -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

    <!-- custom css  -->
     <link rel="stylesheet" href="{% static 'css/dashboard.css' %} ">
</head>

<body>

    <!-- Navbar section -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Main</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'live' %}">Live</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'log' %}">Logs</a>
                    </li>
                </ul>
                <a href="#" class="btn nav-btn">Alert</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row text-center">
            <!-- Employee Name -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-3">
                <div class="card shadow-sm h-100">
                    <div class="card-body d-flex align-items-center">
                        <i class="fas fa-user-tie fa-2x text-primary me-3"></i>
                        <div>

                            <h5 class="card-title">Employee Name</h5>
                            <p class="card-text">{{ request.user.Name }}</p>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Today's Tiger Sightings -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-3">
                <div class="card shadow-sm h-100">
                    <div class="card-body d-flex align-items-center">
                        <i class="fas fa-paw fa-2x text-warning me-3"></i>
                        <div>
                            <h5 class="card-title">Tiger Sightings</h5>
                            <p class="card-text">5 Sightings Today</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Today's Attacks -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-3">
                <div class="card shadow-sm h-100">
                    <div class="card-body d-flex align-items-center">
                        <i class="fas fa-exclamation-triangle fa-2x text-danger me-3"></i>
                        <div>
                            <h5 class="card-title">Today's Attacks</h5>
                            <p class="card-text">1 Attack Reported</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Map and Date Selection Section -->
        <div class="container-fluid mt-lg-5">
            <div class="container">
                <div class="row p-3">
                    <div class="col-12 col-md-8">
                        <div id="map" style="width: 100%; height: 500px;"></div>
                    </div>
                    <div class="col-12 col-md-4 d-flex flex-column justify-content-start  text-white mb-3 mb-md-0">
                        <h1 class="fs-md-1 mb-5 custom-h1">Map View</h1>
                        <h3 class="fs-md-1 mb-5 custom-h3" style="color: #5EB23F;">View Tiger Activity by Month</h3>
                        <div class="mb-3">
                            <label for="monthFilter" class="form-label">Filter by Month:</label>
                            <select id="monthFilter" class="form-select">
                                <option value="all">All</option>
                                <option value="January">January</option>
                                <option value="February">February</option>
                                <option value="March">March</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>


    </div>



    <script>
        // Initialize the map and set its view to Bardiya National Park
        var map = L.map('map').setView([28.3838, 81.2317], 10);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        // Defining  zones in Bardiya (example: grid zones)
        // Add name in  polygon (Zone 1)
        var zone1 = L.polygon([
            [28.564029, 81.216442], [28.612927, 81.261382], [28.648084, 81.289714], [28.671231, 81.286783],
            [28.670373, 81.300461], [28.667802, 81.317069], [28.655800, 81.313161], [28.638653, 81.312184],
            [28.621503, 81.360055], [28.610354, 81.373733], [28.606065, 81.395226], [28.593199, 81.404995],
            [28.592341, 81.415742], [28.586263, 81.422269], [28.580897, 81.420086], [28.577063, 81.423142],
            [28.575147, 81.427943], [28.566330, 81.430126], [28.561730, 81.429689], [28.552911, 81.444094],
            [28.550611, 81.453260], [28.552911, 81.461554], [28.547786, 81.467234], [28.547396, 81.471443],
            [28.542726, 81.472993], [28.427204, 81.378460]
        ], { color: "red", weight: 1 }).addTo(map);

        // Find the centroid or central point of the polygon for the label
        var zone1Center = zone1.getBounds().getCenter();

        // Create a marker with a label for "Zone 1"
        var zone1Label = L.marker(zone1Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'zone 1',
                iconSize: [50, 20]
            })
        }).addTo(map);
        // --------- zone 1 end
        // Add name in  polygon (Zone 2)
        var zone2 = L.polygon([
            [28.427403, 81.378825], [28.542316, 81.473644], [28.539400, 81.475986], [28.539029, 81.477857], [28.538878, 81.481119],
            [28.538576, 81.484938], [28.535673, 81.488157], [28.532129, 81.491290], [28.533373, 81.496783], [28.529151, 81.502576],
            [28.528057, 81.505838], [28.525569, 81.508070], [28.523796, 81.511846], [28.520591, 81.511417], [28.519649, 81.511632],
            [28.519196, 81.512447], [28.513766, 81.515709], [28.513276, 81.516009], [28.511805, 81.519142], [28.510825, 81.524892],
            [28.509316, 81.529270], [28.509203, 81.530171], [28.506978, 81.532574], [28.505545, 81.533948], [28.500190, 81.539097],
            [28.494910, 81.538368], [28.494532, 81.538797], [28.495023, 81.543775], [28.493665, 81.548410], [28.493250, 81.552573],
            [28.495023, 81.555877], [28.494796, 81.557165], [28.491892, 81.559096], [28.490383, 81.562744], [28.485367, 81.567636],
            [28.483494, 81.571452], [28.482739, 81.572563], [28.478701, 81.573926], [28.476882, 81.577612], [28.475328, 81.580237],
            [28.474086, 81.581297], [28.473820, 81.582660], [28.471246, 81.585286], [28.469515, 81.586548], [28.468716, 81.587810],
            [28.469470, 81.590284], [28.468849, 81.592152], [28.458862, 81.601213], [28.453869, 81.606538], [28.287815, 81.450394],
        ], { color: "orange", weight: 1 }).addTo(map);

        // Find the centroid or central point of the polygon for the label
        var zone2Center = zone2.getBounds().getCenter(); // Calculate the center for zone 2

        // Create a marker with a label for "Zone 2"
        var zone2Label = L.marker(zone2Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'Zone 2',
                iconSize: [50, 20]
            })
        }).addTo(map);

        // --------- zone 2 end
        // Add name in  polygon (Zone 3)
        var zone3 = L.polygon([
            [28.287603, 81.450592], [28.453238, 81.606771], [28.454174, 81.610672], [28.445339, 81.620720], [28.443988, 81.625094],
            [28.436296, 81.630531], [28.432242, 81.637505], [28.430579, 81.640697], [28.429124, 81.643416], [28.423302, 81.646962],
            [28.418728, 81.655000], [28.415193, 81.657719], [28.414049, 81.666230], [28.412906, 81.669540], [28.416857, 81.672968],
            [28.411450, 81.681952], [28.410514, 81.686562], [28.405940, 81.691409], [28.402508, 81.691409], [28.399181, 81.694837],
            [28.396789, 81.699092], [28.393774, 81.700984], [28.391902, 81.703348], [28.390758, 81.707485], [28.385974, 81.713868],
            [28.383166, 81.717060], [28.381502, 81.720843], [28.382854, 81.724152], [28.379006, 81.727935], [28.376718, 81.732072],
            [28.375262, 81.741056], [28.375470, 81.746730], [28.373702, 81.752286], [28.371206, 81.754059], [28.369438, 81.757369],
            [28.370478, 81.762570], [28.370270, 81.765880], [28.366733, 81.765171], [28.360284, 81.759852], [28.354251, 81.757842],
            [28.350506, 81.753586], [28.343639, 81.750749], [28.338229, 81.750277], [28.332507, 81.750749], [28.327929, 81.746612],
            [28.320124, 81.742593], [28.314193, 81.743893], [28.316794, 81.732072], [28.316274, 81.725689], [28.320437, 81.722025],
            [28.320020, 81.717887], [28.323766, 81.714932], [28.324807, 81.711386], [28.329281, 81.709731], [28.330842, 81.706185],
            [28.334588, 81.702284], [28.335108, 81.696492], [28.335108, 81.696492], [28.338333, 81.684434], [28.336669, 81.675805],
            [28.337688, 81.673330], [28.334413, 81.674299], [28.332741, 81.675784], [28.333089, 81.678119], [28.333699, 81.680217],
            [28.333577, 81.680870], [28.331591, 81.681424], [28.331156, 81.681741], [28.331347, 81.682691], [28.332236, 81.684551],
            [28.330772, 81.684274], [28.330145, 81.684294], [28.329623, 81.685026], [28.326975, 81.683779], [28.325860, 81.684373],
            [28.325668, 81.687044], [28.327689, 81.691082], [28.325616, 81.688469], [28.325111, 81.686391], [28.324640, 81.684472],
            [28.317556, 81.680102], [28.314669, 81.678543], [28.319023, 81.679887], [28.322052, 81.680855], [28.325033, 81.679404],
            [28.322762, 81.676608], [28.314196, 81.671824], [28.307083, 81.670450], [28.288663, 81.661474], [28.294199, 81.653724],
            [28.291903, 81.649406], [28.284998, 81.645643], [28.283361, 81.645444], [28.279797, 81.640003], [28.276816, 81.645414],
            [28.274313, 81.643424], [28.269723, 81.645035], [28.267052, 81.645793], [28.267303, 81.642761], [28.263380, 81.641245],
            [28.259207, 81.630348], [28.255368, 81.622767], [28.250777, 81.621062], [28.249934, 81.614672], [28.248515, 81.611545],
            [28.240752, 81.609555], [28.236745, 81.602543], [28.235159, 81.597142], [28.238748, 81.594299], [28.236328, 81.592215],
            [28.235576, 81.590225], [28.240668, 81.590509], [28.237747, 81.586435], [28.234574, 81.582265], [28.228647, 81.582360],
            [28.230400, 81.577148], [28.227645, 81.574685], [28.225558, 81.577243], [28.223471, 81.577433], [28.222552, 81.575443],
            [28.220799, 81.574306],

        ], { color: "red", weight: 1 }).addTo(map);

        // Find the centroid or central point of the polygon for the label
        var zone3Center = zone3.getBounds().getCenter(); // Calculate the center for zone 2

        // Create a marker with a label for "Zone 3"
        var zone3Label = L.marker(zone3Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'Zone 3',
                iconSize: [50, 20]
            })
        }).addTo(map);

        // --------- zone 3 end

        // Add name in  polygon (Zone 4)
        var zone4 = L.polygon([

            [28.564503, 81.215872], [28.558814, 81.205456], [28.554456, 81.199699], [28.545373, 81.189320],
            [28.531531, 81.176556], [28.531531, 81.176556], [28.523478, 81.167693], [28.522080, 81.168072],
            [28.520349, 81.167655], [28.516532, 81.164594], [28.513341, 81.162817], [28.511745, 81.162817],
            [28.509742, 81.162276], [28.501322, 81.160576], [28.500575, 81.157910], [28.501560, 81.153081],
            [28.496568, 81.145972], [28.411720, 81.063203], [28.426914, 81.378675],
        ], { color: "yellow", weight: 1 }).addTo(map);

        // Find the centroid or central point of the polygon for the label
        var zone4Center = zone4.getBounds().getCenter(); // Calculate the center for zone 4

        // Create a marker with a label for "Zone 3"
        var zone4Label = L.marker(zone4Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'Zone 4',
                iconSize: [50, 20]
            })
        }).addTo(map);

        // --------- zone 4 end

        // Add name in  polygon (Zone 4)
        var zone4 = L.polygon([

            [28.564503, 81.215872], [28.558814, 81.205456], [28.554456, 81.199699], [28.545373, 81.189320], [28.531531, 81.176556],
            [28.531531, 81.176556], [28.523478, 81.167693], [28.522080, 81.168072], [28.520349, 81.167655], [28.516532, 81.164594],
            [28.513341, 81.162817], [28.511745, 81.162817], [28.509742, 81.162276], [28.501322, 81.160576], [28.500575, 81.157910],
            [28.501560, 81.153081], [28.496568, 81.145972], [28.411720, 81.063203], [28.426914, 81.378675],
        ], { color: "crimson", weight: 1 }).addTo(map);

        // Find the centroid or central point of the polygon for the label
        var zone4Center = zone4.getBounds().getCenter(); // Calculate the center for zone 4

        // Create a marker with a label for "Zone 3"
        var zone4Label = L.marker(zone4Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'Zone 4',
                iconSize: [50, 20]
            })
        }).addTo(map);

        // --------- zone 4 end
        // Add name in  polygon (Zone 5)
        var zone5 = L.polygon([
            [28.427580, 81.378219],
            [28.410737, 81.060065], [28.408397, 81.059123], [28.407523, 81.059299],
            [28.405821, 81.061318], [28.404582, 81.062456], [28.403226, 81.064444],
            [28.401081, 81.066314], [28.399644, 81.067058], [28.397571, 81.067410],
            [28.396553, 81.067554], [28.394626, 81.067389], [28.385206, 81.079750],
            [28.382851, 81.088922], [28.361667, 81.210856], [28.358903, 81.213807],
            [28.325394, 81.235127], [28.288882, 81.233255], [28.223315, 81.291947],
            [28.221245, 81.297838], [28.197789, 81.321678], [28.287443, 81.449892],
        ], { color: "#000000", weight: 1 }).addTo(map);

        // Find the centroid or central point of the polygon for the label
        var zone5Center = zone5.getBounds().getCenter(); // Calculate the center for zone 4

        // Create a marker with a label for "Zone 5"
        var zone5Label = L.marker(zone5Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'Zone 5',
                iconSize: [50, 20]
            })
        }).addTo(map);

        // --------- zone 5  end
        // Add name in  polygon (Zone 6)
        var zone6 = L.polygon([
            [28.287257, 81.450047], [28.197330, 81.321641], [28.182767, 81.318543],
            [28.175625, 81.324898], [28.168832, 81.321720], [28.167221, 81.314412],
            [28.167431, 81.302179], [28.164560, 81.302179], [28.161339, 81.309090],
            [28.159378, 81.311393], [28.156226, 81.311314], [28.160918, 81.320290],
            [28.148592, 81.328314], [28.144949, 81.318543], [28.137314, 81.315762],
            [28.134232, 81.318066], [28.134442, 81.321879], [28.140677, 81.334271],
            [28.142988, 81.369542], [28.150133, 81.375976], [28.152024, 81.376453],
            [28.153495, 81.377326], [28.154895, 81.377088], [28.155736, 81.377882],
            [28.157487, 81.376929], [28.158817, 81.376135], [28.159658, 81.370892],
            [28.161272, 81.367955], [28.162919, 81.366321], [28.167962, 81.367372],
            [28.172387, 81.371341], [28.174034, 81.373559], [28.176915, 81.374376],
            [28.177190, 81.374643], [28.174656, 81.386692], [28.173901, 81.390789], [28.175087, 81.410238],
            [28.174764, 81.413235], [28.174225, 81.417027], [28.173685, 81.418556],
            [28.170828, 81.426813], [28.169372, 81.428709], [28.161123, 81.446812],
            [28.158535, 81.447485], [28.157025, 81.447057], [28.155946, 81.446200],
            [28.151147, 81.450176], [28.140901, 81.449992], [28.127364, 81.467973],
            [28.125692, 81.473539], [28.118679, 81.483997], [28.110301, 81.479956],
            [28.083270, 81.478545], [28.077459, 81.487473], [28.068650, 81.504884],
            [28.074121, 81.501463], [28.077139, 81.504457], [28.075441, 81.507664],
            [28.076573, 81.517926], [28.082044, 81.518781], [28.084685, 81.523271],
            [28.089777, 81.510871], [28.091832, 81.509693], [28.095485, 81.511585],
            [28.096457, 81.511239], [28.096457, 81.509551], [28.096944, 81.508292],
            [28.099680, 81.505682], [28.105179, 81.502887], [28.105666, 81.503317],
            [28.105856, 81.504238], [28.104827, 81.505897], [28.104664, 81.507217],
            [28.104854, 81.508537], [28.107075, 81.510595], [28.109025, 81.509796],
            [28.113169, 81.506388], [28.114252, 81.506142], [28.115010, 81.504085],
            [28.116067, 81.501874], [28.117231, 81.501014], [28.119287, 81.500869],
            [28.119862, 81.501304], [28.120319, 81.502657], [28.122249, 81.505614],
            [28.123207, 81.505213], [28.124784, 81.501621], [28.126493, 81.498447],
            [28.127038, 81.498413], [28.128423, 81.499967], [28.128438, 81.500518],
            [28.127171, 81.503660], [28.128070, 81.504161], [28.129101, 81.503509],
            [28.131105, 81.503626], [28.133153, 81.504261], [28.134671, 81.503108],
            [28.136291, 81.501488], [28.139739, 81.499934], [28.141654, 81.499683],
            [28.144070, 81.498497], [28.145264, 81.498664], [28.146870, 81.499733],
            [28.147194, 81.500234], [28.147606, 81.501955], [28.147974, 81.503292],
            [28.149448, 81.504729], [28.152040, 81.505798], [28.152364, 81.506617],
            [28.152070, 81.507352], [28.149035, 81.510276], [28.148667, 81.511897],
            [28.152173, 81.514019], [28.154280, 81.513835], [28.157206, 81.515349],
            [28.158006, 81.521219], [28.160780, 81.521187], [28.160208, 81.517068],
            [28.162181, 81.516744], [28.165183, 81.518755], [28.168671, 81.521868],
            [28.170272, 81.518560], [28.172730, 81.519214], [28.173409, 81.521276],
            [28.173477, 81.523627], [28.175346, 81.519753], [28.175278, 81.518616],
            [28.176195, 81.517711], [28.179321, 81.518077], [28.191578, 81.527232],
            [28.195339, 81.527672], [28.203870, 81.540167], [28.209624, 81.560689],
            [28.220661, 81.573484],
        ], { color: "transparent", weight: 1 }).addTo(map);
        // Find the centroid or central point of the polygon for the label
        var zone6Center = zone6.getBounds().getCenter(); // Calculate the center for zone 6

        // Create a marker with a label for "Zone 6"
        var zone6Label = L.marker(zone6Center, {
            icon: L.divIcon({
                className: 'zone-label',
                html: 'Zone 6',
                iconSize: [50, 20]
            })
        }).addTo(map);

        // --------- zone 6  end
        //  dataset of tiger sightings
        var sightingsData = [
            { //  sighting at jan  Jan
                "lat": 28.292137, "lng": 81.564322, "month": "January",
            },
            { // 2 sighting  jan
                "lat": 28.265674, "lng": 81.475303, "month": "January",
            },
            { // 3  sighting jan
                "lat": 28.310979, "lng": 81.490350, "month": "January",
            },
            { // 4  sighting jan
                "lat": 28.351520, "lng": 81.438586, "month": "January",
            },
            { // 5  sighting jan
                "lat": 28.264673, "lng": 81.590990, "month": "January",
            },

            {
                //  1 sighting feb
                "lat": 28.4000, "lng": 81.2000, "month": "February", "sightings": 3
            },
            { // 2 sighting  feb
                "lat": 28.490470, "lng": 81.274779, "month": "February", "sightings": 6
            },
            { // 3 sighting  feb
                "lat": 28.370785, "lng": 81.433264, "month": "February", "sightings": 4
            },
            { // 4 sighting  feb
                "lat": 28.379867, "lng": 81.407263, "month": "February", "sightings": 5
            },
            { // 5 sighting  feb
                "lat": 28.297329, "lng": 81.450469, "month": "February", "sightings": 7
            },
            { //  1 sighting mar
                "lat": 28.4167, "lng": 81.2500, "month": "March", "sightings": 10
            },
            { //  2  sighting mar

                "lat": 28.340773, "lng": 81.446975, "month": "March", "sightings": 8
            },
            { //  3  sighting mar

                "lat": 28.424667, "lng": 81.376614, "month": "March", "sightings": 3
            },
            { //  4  sighting mar

                "lat": 28.308266, "lng": 81.435653, "month": "March", "sightings": 1
            },
            { //  5  sighting mar



                "lat": 28.257908, "lng": 81.518547, "month": "March", "sightings": 25
            },

        ];
        // Define the polygon coordinates for Bardiya National Park's boundary (this is an example)
        var bardiyaBoundary = [
            [28.410987, 81.061378],  // west 1
            [28.427585, 81.070742], [28.437418, 81.085555], [28.457236, 81.092352],
            [28.461111, 81.110725], [28.486246, 81.133595], [28.495561, 81.146558],
            [28.496946, 81.148572], [28.501364, 81.152094], [28.501429, 81.153283],
            [28.501246, 81.160170], [28.507275, 81.162509], [28.515085, 81.163756],
            [28.519489, 81.168385], [28.523927, 81.167966], [28.525541, 81.170081],
            [28.546634, 81.190574], [28.557603, 81.204319], [28.563447, 81.213812],
            [28.571707, 81.225878], [28.577005, 81.231999], [28.588067, 81.242823],
            [28.593676, 81.248767], [28.613148, 81.260921], [28.612298, 81.260757],
            [28.616466, 81.267285], [28.629698, 81.271677], [28.633873, 81.275833],
            [28.640847, 81.283282], [28.648099, 81.288172], [28.658306, 81.287885],
            [28.673025, 81.285485],//west 2
            [28.673774, 81.289044],//up section 1
            [28.674648, 81.290397], [28.674410, 81.290324], [28.673370, 81.293168],
            [28.673370, 81.293168], [28.672955, 81.298104], [28.673578, 81.300355],
            [28.671187, 81.301185], [28.670321, 81.302370], [28.670945, 81.303949],
            [28.672227, 81.304068], [28.672227, 81.306200], [28.672781, 81.307069],
            [28.671222, 81.308728], [28.671499, 81.310031], [28.670806, 81.311532],
            [28.670564, 81.313625], [28.669732, 81.316548], [28.668034, 81.319983],
            [28.668086, 81.319894], [28.662913, 81.320778], [28.657998, 81.317880],
            [28.652951, 81.315468], [28.652460, 81.313929], [28.653319, 81.311830],
            [28.651293, 81.309941], [28.647241, 81.310431], [28.645583, 81.311480],
            [28.643066, 81.314209], [28.641187, 81.315106], [28.639423, 81.314451],
            [28.637451, 81.315025], [28.636753, 81.315409], [28.636315, 81.315797],
            [28.635488, 81.317625], [28.635440, 81.320339], [28.635245, 81.323164],
            [28.632815, 81.326432], [28.631891, 81.327208], [28.631453, 81.328593],
            [28.630821, 81.330199], [28.631749, 81.327695], [28.631066, 81.329585],
            [28.630432, 81.331809], [28.630584, 81.331406], [28.629792, 81.333460],
            [28.629001, 81.336616], [28.628531, 81.339208], [28.626680, 81.340318],
            [28.625706, 81.342204], [28.624829, 81.344313], [28.623855, 81.346310],
            [28.624342, 81.348862], [28.623271, 81.352524], [28.622784, 81.356297],
            [28.623466, 81.358738], [28.623563, 81.362289], [28.622686, 81.365285],
            [28.619764, 81.368281], [28.618108, 81.369612], [28.616258, 81.371721],
            [28.615576, 81.373607], [28.613238, 81.376048], [28.612166, 81.378711],
            [28.611679, 81.381707], [28.610023, 81.384925], [28.610023, 81.388032],
            [28.607685, 81.393802], [28.607393, 81.396465], [28.606516, 81.398463],
            [28.606321, 81.400349], [28.603886, 81.399683], [28.595215, 81.408782],
            [28.594691, 81.412805], [28.594691, 81.414465], [28.595298, 81.416057],
            [28.594509, 81.417163], [28.590499, 81.419723], [28.588130, 81.422905],
            [28.587098, 81.424220], [28.584607, 81.423113], [28.581934, 81.421660],
            [28.579676, 81.422899], [28.577751, 81.423808], [28.577376, 81.424396],
            [28.577845, 81.425786], [28.577896, 81.425970], [28.577514, 81.430273],
            [28.576770, 81.430479], [28.575805, 81.430640], [28.575122, 81.431670],
            [28.572126, 81.432356], [28.570579, 81.432585], [28.569714, 81.432608],
            [28.569151, 81.432906], [28.567985, 81.432951], [28.567020, 81.432471],
            [28.566055, 81.432219], [28.565613, 81.432356], [28.565111, 81.432791],
            [28.563744, 81.433089], [28.562899, 81.433547], [28.562095, 81.434348],
            [28.558959, 81.438353], [28.558697, 81.438857], [28.558456, 81.440093],
            [28.558396, 81.441077], [28.558014, 81.441993], [28.557290, 81.442542],
            [28.556546, 81.442863], [28.555782, 81.443321], [28.554033, 81.445175],
            [28.553812, 81.445587], [28.553550, 81.448562], [28.553088, 81.450073],
            [28.552806, 81.451332], [28.552223, 81.452751], [28.552123, 81.453049],
            [28.552424, 81.454422], [28.552847, 81.454857], [28.553209, 81.455750],
            [28.553188, 81.456528], [28.553631, 81.457901], [28.554053, 81.459504],
            [28.554133, 81.462205], [28.554254, 81.463418], [28.553993, 81.463967],
            [28.553772, 81.464974], [28.553369, 81.465867], [28.551982, 81.466828],
            [28.550836, 81.466989], [28.548423, 81.468545], [28.548081, 81.469323],
            [28.548061, 81.470880], [28.548524, 81.471727], [28.548403, 81.472093],
            [28.546332, 81.473123], [28.545628, 81.473032], [28.544985, 81.473535],
            [28.543276, 81.473673], [28.541969, 81.474016], [28.540702, 81.474863],
            [28.539898, 81.475664], [28.539093, 81.476946], [28.538892, 81.478548],
            [28.539073, 81.480036], [28.538887, 81.481075], [28.539068, 81.482494],
            [28.539269, 81.483456], [28.538907, 81.484738], [28.538907, 81.485699],
            [28.538887, 81.486088], [28.537118, 81.488240], [28.535589, 81.488400],
            [28.534866, 81.488606], [28.532372, 81.490986], [28.532030, 81.491513],
            [28.532332, 81.492451], [28.533277, 81.495107], [28.533418, 81.497121],
            [28.532814, 81.497991], [28.532070, 81.498677], [28.531145, 81.499730],
            [28.530562, 81.500417], [28.529215, 81.502546], [28.528953, 81.503072],
            [28.528350, 81.505613], [28.527284, 81.506552], [28.526500, 81.507055],
            [28.526500, 81.507055], [28.525032, 81.509138], [28.524790, 81.510580],
            [28.524569, 81.511381], [28.524106, 81.512045], [28.523222, 81.512434],
            [28.522035, 81.512183], [28.521452, 81.511862], [28.520607, 81.511404],
            [28.519883, 81.511587], [28.519501, 81.512114], [28.519219, 81.512595],
            [28.514895, 81.514838], [28.514151, 81.515341], [28.513487, 81.515936],
            [28.512502, 81.517562], [28.511918, 81.519027], [28.511737, 81.519851],
            [28.511576, 81.520743], [28.511234, 81.523513], [28.511254, 81.524062],
            [28.510470, 81.526100], [28.509766, 81.528389], [28.509283, 81.529922],
            [28.508961, 81.530403], [28.506528, 81.532989], [28.505703, 81.533791],
            [28.505421, 81.534317], [28.504375, 81.535599], [28.502122, 81.537476],
            [28.500111, 81.539101], [28.498864, 81.539101], [28.498059, 81.539376],
            [28.495947, 81.538552], [28.494740, 81.538437], [28.494478, 81.538918],
            [28.494579, 81.540658], [28.494961, 81.542603], [28.494901, 81.544183],
            [28.494699, 81.544938], [28.494518, 81.545556], [28.494559, 81.546060],
            [28.494418, 81.546746], [28.493935, 81.547456], [28.493694, 81.548211], [28.493613, 81.549012],
            [28.493814, 81.549836], [28.493311, 81.552057], [28.493150, 81.553087],
            [28.493472, 81.553934], [28.494961, 81.555467], [28.495142, 81.556291],
            [28.494860, 81.557184], [28.493171, 81.558145], [28.492165, 81.558947],
            [28.491702, 81.559519], [28.491601, 81.560801], [28.491078, 81.561762],
            [28.490093, 81.563112], [28.487980, 81.564967], [28.485646, 81.567416],
            [28.485123, 81.568308], [28.484842, 81.569316], [28.484379, 81.570597],
            [28.483272, 81.572177], [28.482146, 81.572886], [28.480979, 81.572978], [28.479510, 81.573802], [28.478605, 81.574123], [28.478222, 81.574489],
            [28.477176, 81.577052], [28.475405, 81.580188], [28.474480, 81.580761], [28.474017, 81.581814],
            [28.473917, 81.582523], [28.472870, 81.583576], [28.470838, 81.585865], [28.469027, 81.586872], [28.468665, 81.587765], [28.468665, 81.588383],
            [28.469550, 81.590191], [28.468866, 81.592068], [28.465224, 81.595708], [28.464339, 81.596875], [28.462568, 81.600034], [28.460314, 81.601087],
            [28.458845, 81.602071], [28.453411, 81.607794], [28.454397, 81.610723], [28.453713, 81.612692], [28.447132, 81.619124], [28.445743, 81.621024],
            [28.445119, 81.623084], [28.444918, 81.624274], [28.444395, 81.625945], [28.441054, 81.627799], [28.436324, 81.631279], [28.434291, 81.634002],
            [28.433768, 81.635193], [28.431835, 81.639839], [28.430708, 81.641442], [28.430547, 81.642289], [28.427185, 81.645447], [28.423441, 81.647279],
            [28.422193, 81.648766], [28.419878, 81.652658], [28.419153, 81.654992], [28.415429, 81.658083], [28.414905, 81.658723], [28.414724, 81.665041], [28.413355, 81.669024], [28.413134, 81.670123], [28.414402, 81.671565],
            [28.417100, 81.672892], [28.417019, 81.674838], [28.411825, 81.682002], [28.411221, 81.682918], [28.405926, 81.691433], [28.402805, 81.691891],
            [28.400702, 81.694290], [28.399041, 81.695771], [28.397758, 81.698239], [28.395247, 81.700760], [28.393766, 81.701640], [28.392161, 81.703925],
            [28.391482, 81.706157], [28.391104, 81.708174], [28.381995, 81.723358], [28.382193, 81.723197], [28.377248, 81.735609], [28.374458, 81.741149],
            [28.374400, 81.750836],

            [28.370065, 81.766462],// up section last
            [28.366248, 81.765193],//right section top
            [28.350423, 81.754018],
            [28.313865, 81.743673], //right section down
            [28.339004, 81.686228],
            [28.338234, 81.676606],
            [28.336646, 81.672722], [28.325586, 81.677701], [28.293443, 81.659209], [28.295113, 81.652571], [28.280499, 81.638820],
            [28.265257, 81.638109], [28.241659, 81.589745], [28.229963, 81.574335], [28.219727, 81.562955], [28.205521, 81.541144], [28.195910, 81.525260],
            [28.180865, 81.518385], [28.160384, 81.515540], [28.149514, 81.498945], [28.129654, 81.499419], [28.127563, 81.497522], [28.084629, 81.520897],
            [28.075731, 81.500972], [28.083761, 81.478588], [28.109821, 81.480257], [28.118608, 81.484264], [28.125641, 81.473761], [28.127614, 81.467926],
            [28.141250, 81.450226], [28.151111, 81.450615], [28.150597, 81.450712], [28.155951, 81.446227], [28.156736, 81.446946], [28.158533, 81.447461],
            [28.160974, 81.446860], [28.169235, 81.428853], [28.160986, 81.446939], [28.171309, 81.428247], [28.175401, 81.410780], [28.174235, 81.390755],
            [28.177556, 81.374828], [28.173412, 81.372041], [28.167586, 81.367283], [28.163333, 81.366423], [28.159662, 81.369530], [28.158555, 81.376469],
            [28.143463, 81.369199], [28.140200, 81.344019], [28.140957, 81.334569], [28.134605, 81.321549], [28.134139, 81.318046], [28.137169, 81.315601],
            [28.145153, 81.318575], [28.148008, 81.328290], [28.160769, 81.320360], [28.156457, 81.311636], [28.160653, 81.310578], [28.162925, 81.304036],
            [28.167237, 81.302383], [28.167295, 81.310909], [28.168577, 81.321351], [28.174927, 81.324655], [28.182427, 81.318475], [28.193320, 81.319505],
            [28.197462, 81.320964], [28.210727, 81.308766], [28.220068, 81.299560], [28.222828, 81.292050], [28.239181, 81.276654], [28.279793, 81.240525],
            [28.289175, 81.232650], [28.324670, 81.234474], [28.344646, 81.219585], [28.358440, 81.213395], [28.360810, 81.210616], [28.366021, 81.182807],
            [28.371119, 81.151994], [28.376859, 81.118316], [28.380738, 81.098027], [28.382352, 81.089208], [28.385099, 81.079821], [28.394573, 81.067363],
            [28.396621, 81.067535], [28.399594, 81.067095], [28.401085, 81.066280], [28.403235, 81.064480], [28.404575, 81.062549], [28.405679, 81.061508],
            [28.407444, 81.059394], [28.408473, 81.059115], [28.409813, 81.059480], [28.414059, 81.061272], [28.416286, 81.062913], [28.417456, 81.063353],
            [28.418428, 81.063514], [28.420580, 81.064394], [28.422425, 81.065509], [28.424699, 81.067912], [28.431596, 81.075251], [28.432426, 81.076238],
            [28.432775, 81.076313], [28.433388, 81.076817], [28.433681, 81.077504], [28.433719, 81.078416], [28.436380, 81.083276], [28.437598, 81.085340],
            [28.438278, 81.085815], [28.440547, 81.086386], [28.444345, 81.087635], [28.446172, 81.087784], //ending




        ];
        // -------
        // Create a polygon for Bardiya National Park boundary and add it to the map
        var bardiyaPolygon = L.polygon(bardiyaBoundary, {
            color: 'blue',        // Polygon border color
            fillColor: 'transparent',  // Polygon fill color
            fillOpacity: 0.5       // Fill transparency
        }).addTo(map);
        // ---------


        // Function to add markers to the map
        function addMarkers(data) {
            data.forEach(function (sighting) {
                var marker = L.marker([sighting.lat, sighting.lng]).addTo(map);

                // Add a popup to each marker
                marker.bindPopup(`
      <b>Tiger Sightings</b><br>
      Month: ${sighting.month}<br>

    `);
            });
        }

        // Add all markers initially
        addMarkers(sightingsData);

        // Event listener for month filter
        document.getElementById('monthFilter').addEventListener('change', function () {
            var selectedMonth = this.value;

            // Clear the map of all markers
            map.eachLayer(function (layer) {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            // Filter and add markers based on selected month
            var filteredData = selectedMonth === 'all' ? sightingsData : sightingsData.filter(sighting => sighting.month === selectedMonth);
            addMarkers(filteredData);
        });

    </script>
    <!-- JS Bootstrap CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>
